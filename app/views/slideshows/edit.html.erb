<h1>Editing Slideshow</h1>

<%= render 'form' %>

<script type="text/javascript">
$(document).ready(function() {
  $('#slideshow-tabs').tab('show')

  $('.remove_slide').bind('ajax:success', function() {
    $(this).closest('tr').fadeOut();
  });
});
</script>

<div id="showshow-tabs" class="tabbable">
  <ul class="nav nav-tabs">
    <li><a href="#tabs-1" data-toggle="tab">Add new slide</a></li>
    <li><a href="#tabs-2" data-toggle="tab">Add existing slide</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane" id="tabs-1">
      <div class="well">
      <%= render :partial => '/slides/form' %>
      </div>
    </div>
    <div class="tab-pane" id="tabs-2">
      <div class="slides well">
        <%= render :partial => '/slides/list', :locals => {:slides => Slide.all, :action_links => lambda { |slide|
              link_to(raw('<i class="icon-plus"></i>'), url_for(:action => :update, :id => @slideshow.id, :add_slides => [ slide.id ]), method: :put, :class=>'btn btn-mini', :title=>'Add to slideshow', :remote => true)
            } } %>
      </div>
    </div>
  </div>
</div>

<% unless @slides.empty?%>
<br /><br />
<%= render :partial => '/slides/list', :locals => {:slides => @slides, :action_links => lambda { |slide|
      link_to(raw('<i class="icon-edit"></i>'), edit_slide_path(slide), :class=>'btn btn-mini', :title=>'Edit slide') + \
      link_to(raw('<i class="icon-remove"></i>'), url_for(:action => :update, :id => @slideshow.id, :del_slides => [ slide.id ]), method: :put, :class=>'btn btn-mini remove_slide', :title=>'Remove from slideshow', :remote => true)
    } } %>
<% end %>

<%= link_to 'Show', @slideshow, :class=>'btn' %>
<%= link_to 'Back', slideshows_path, :class=>'btn' %>
